<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Registrar Usuario</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous" />
  <link rel="stylesheet" type="text/css" href="/Styles/stylesregistro.css">
</head>

<body>
  <section>
    <div class="form-box">
      <div class="form-value">
        <form action="/saveregistro" method="POST" id="contactForm">
          <h1>REGISTRAR USUARIO</h1>
          <img src="/Styles/logo.png" alt="Imagen on fondo transparente" />

          <div class="row justify-content-center" style="margin-left: 1px">
            <div class="col-sm-6">
              <div class="form-floating mb-1">
                <input type="text" required class="form-control" id="nombre" name="nombre"
                  placeholder="name@example.com" style="width: 250px" />
                <label for="floatingInput">Nombre:</label>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-floating mb-1">
                <input type="text" required class="form-control" id="direccion" name="direccion" placeholder="direccion"
                  style="width: 250px; margin-left: 1px" />
                <label for="floatingPassword">Dirección:</label>
              </div>
            </div>
          </div>
          <div class="row justify-content-center" style="margin-left: 1px;">
            <div class="col-sm-6">
              <div class="form-floating mb-1">
                <input type="text" required class="form-control" id="apellido" name="apellido" placeholder="apellido"
                  style="width: 250px" />
                <label for="floatingPassword">Apellido:</label>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-floating mb-1">
                <input type="email" required class="form-control" id="correo" name="correo" placeholder="correo"
                  style="width: 250px" />
                <label for=" floatingInput">Correo electrónico:</label>
              </div>
            </div>
          </div>
          <div class="row justify-content-center" style="margin-left: 1px">
            <div class="col-sm-6">
              <div class="form-floating mb-1">
                <input type="tel" required class="form-control" id="telefono" name="telefono" placeholder="telefono" maxlength="10"
                style="width: 250px; margin-left: 1px;" />
                <label for="floatingPassword">Teléfono:</label>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-floating mb-4">
                <input type="password" required class="form-control" id="contrasena" name="contrasena"
                placeholder="password" style="width: 250px" />
                <label for=" floatingInput">Contraseña:</label>
              </div>
            </div>
          </div>
          <input type="hidden" name="id_rol" value="2">
          <div class="row justify-content-center">

            <button type="submit" class="button">
             <strong>Guardar</strong>
            </button>

            <button id="buttonCancelar" class="button">
             <strong>Cancelar</strong>
            </button>
            <div id="msg">
              <% if (error) { %>
                <strong><p><%= error %></p></strong>
                  <% } %>
            </div>
            <% if (successMessage) { %>
              <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
              <script type="text/javascript">
                swal({
                  title: "Registro Exitoso",
                  text: "<%= successMessage %>",
                  icon: "success",
                  className: "custom-swal",
                }).then(function() {
                  window.location = "/"; 
                });
              </script>
            <% } %>
            <script>
              document.getElementById("buttonCancelar").addEventListener("click", function () {
                window.location.href = "/";
              });
            </script>
          </div>
      </div>
      </form>
    </div>
    </div>
  </section>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.12/dist/sweetalert2.all.min.js"></script>
  <script src="/controllers/crudRegistro.js"></script>
  <script>
    const telefonoInput = document.getElementById('telefono');

    telefonoInput.addEventListener('input', function(event) {
      const value = event.target.value;
      const sanitizedValue = value.replace(/\D/g, '');
      event.target.value = sanitizedValue;
    });
  </script>
</body>

</html>